<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
	<head>
		<title>iBetelgeuse - Augmented Reality Browser</title>
		<link rel="stylesheet" href="style.css" type="text/css" />
	</head>
	<body>
		<h1>iBetelgeuse - Custom Dimensions</h1>
		
		<div id="toc">
			<h2>Table of Contents</h2>
			<ul>
				<li><a href="index.html">Main</a></li>
				<li><a href="custom-dimensions.html">Custom Dimensions</a>
					<ul>
						<li><a href="#definitions">Definitions</a></li>
						<li><a href="#ddf">Dimension Description Files</a></li>
						<li><a href="#loading">Loading Dimensions</a></li>
						<li><a href="#dynamic-dimensions">Dynamic Dimensions</a></li>
						<li><a href="#example">Example</a></li>
						<li><a href="#betelgeuse">Differences with Betelgeuse for Android</a></li>
					</ul></li>
				<li><a href="doc/">Documentation</a></li>
				<li><a href="https://betelgeusedesigner.appspot.com/">Betelgeuse Designer</a></li>
				<li><a href="http://github.com/finalist/iBetelgeuse/">Project Page</a></li>
			</ul>
		</div>
		
		<p>
			This page contains all information that is required to create a new virtual world for Betelgeuse from scratch. First, it shows definitions that are used in the rest of the page, then it describes the definition format and how they are loaded, and finally it describes the differences between iBetelgeuse for iPhone and Betelgeuse for Android.
		</p>
		
		<h2 id="definitions">Definitions</h2>
		<dl>
			<dt>dimension</dt>
			<dd>Defines the virtual world and its contents, often constrained to a certain radius surrounding a particular location. The most important elements of a dimension are features and overlays.</dd>
			
			<dt>static dimension</dt>
			<dd>Dimension that always has the same content regardless of the user's current location.</dd>
			
			<dt>dynamic dimension</dt>
			<dd>Dimension that is served dynamically and whose contents may be dependent on the user's current location, device's screen size, etc.</dd>
			
			<dt>DDF</dt>
			<dd>Dimension Description File, file format describing a dimension.</dd>
			
			<dt>feature</dt>
			<dd>An object in the virtual world with a three-dimensional location (in practice, a WGS84 location). Examples include: labels that mark points of interest in a city, and photos taken at a certain location.</dd>
			
			<dt>overlay</dt>
			<dd>An object displayed on screen with a two-dimensional location (a <a href="#screen-coordinates">screen coordinate</a>). Examples include: the logo of the creator of the dimension, and a label indicating the score of a game.</dd>
			
			<dt id="screen-coordinates">screen coordinate</dt>
			<dd>Since some devices can be rotated in portrait or landscape orientation, the screen's width and height can change. The screen width and height are considered to be the width and height of the screen in its current orientation. Currently, no event is sent to the server when the screen's width and height change, so it is safest to place overlays within the smallest rectangle that fits the screen so that they remain visible after rotating.</dd>
			
			<dt>actions</dt>
			<dd>A particular task to perform, most often triggered by the user selecting something or tapping on the screen. Possible actions are:
				<dl>
					<dt>refresh</dt>
					<dd>The dimension needs to be reloaded.</dd>

					<dt>webpage</dt>
					<dd>A specific URL needs to be loaded, possibly using an external application depending on the URL scheme.</dd>

					<dt>dimension</dt>
					<dd>The dimension referenced by a specific URL needs to be loaded.</dd>
				</dl>
			</dd>
			
			<dt>events</dt>
			<dd>A particular trigger for a dimension to be refreshed. An event may have a source from which it originated. Possible events are:
				<dl>
					<dt>initialize</dt>
					<dd>The first load of the dimension.</dd>
					
					<dt>time</dt>
					<dd>A certain amount of time has elapsed since the last refresh of the dimension.</dd>
					
					<dt>distance</dt>
					<dd>A certain amount of distance has been travelled by the device since the last refresh of the dimension.</dd>
				</dl>
			</dd>
		</dl>

		<h2 id="ddf">Dimension Description Files</h2>
		<p>
			To create a virtual world, one must create a Dimension Description File (DDF). This section describes the format of such files, and is a more detailed version of <a href="http://www.gamaray.com/developers.html">the original DDF format by Gamaray</a>.
		</p>
		<p>
			All DDF files must use the &quot;.gddf&quot; file extension and application/gamaray-gddf MIME type, which is an abbreviation of &quot;Gamaray Dimension Description File&quot;. DDFs contain all information that the client requires to render a dimension, with the only exception of image data; image data is loaded from an URL.
		</p>
		
		<h3>Schema</h3>
		<ul>
			<li><a href="#dimension">&lt;dimension&gt;</a>
				<ul>
					<li><a href="#refreshTime">&lt;refreshTime&gt;</a></li>
					<li><a href="#refreshDistance">&lt;refreshDistance&gt;</a></li>

					<li><a href="#locations">&lt;locations&gt;</a>
						<ul>
							<li><a href="#location">&lt;location&gt;</a></li>
						</ul>
					</li>

					<li><a href="#assets">&lt;assets&gt;</a>
						<ul>
							<li><a href="#asset">&lt;asset&gt;</a></li>
						</ul>
					</li>

					<li><a href="#features-tag">&lt;features&gt;</a>
						<ul>
							<li><a href="#featureTxt">&lt;featureTxt&gt;</a></li>
							<li><a href="#featureImg">&lt;featureImg&gt;</a></li>
						</ul>
					</li>

					<li><a href="#overlays">&lt;overlays&gt;</a>
						<ul>
							<li><a href="#overlayTxt">&lt;overlayTxt&gt;</a></li>
							<li><a href="#overlayImg">&lt;overlayImg&gt;</a></li>
						</ul>
					</li>
				</ul>
			</li>
		</ul>

		
		<h3 id="dimension">&lt;dimension&gt;</h3>
		<p>
			This is the top level tag in the DDF file. It contains all other elements.
		</p>

		<table class="simple-child-tags">
			<caption>Simple child tags</caption>
			<tr>
				<td>&lt;name&gt;</td>
				<td>string</td>
				<td>&quot;&quot;</td>
				<td>The name of this dimension. This is only used to display to the user.</td>
			</tr>
			<tr>
				<td>&lt;radarRange&gt;</td>
				<td>float, &gt; 0</td>
				<td>1000</td>
				<td>The radar range in meters. Items within this range will be displayed on the radar, scaled so that items that are this far from the current position are displayed on the edge of the radar view.</td>
			</tr>
			<tr>
				<td>&lt;relativeAltitude&gt;</td>
				<td>boolean</td>
				<td>false</td>
				<td>Specifies whether the altitude that is specified in a location is interpreted as an absolute or relative value. If &quot;true&quot;, an altitude of 0 means that the location is at the same height as the device. If &quot;false&quot;, a location of 0 means that it has a WGS84 altitude of 0, which may be above or below the user. This tag can be used to more easily display objects at eye-level, or more accurately display the height of objects in the augmented world.</td>
			</tr>
			<tr>
				<td>&lt;refreshUrl&gt;</td>
				<td>url, gamaray://...</td>
				<td>&quot;&quot;</td>
				<td>This is the URL that should be used to refresh this dimension. See <a href="#dynamic-dimensions">the section about dynamic dimensions</a>.</td>
			</tr>
			
		</table>

		<table class="advanced-child-tags">
			<caption>Advanced child tags</caption>
			<tr>
				<td><a href="#refreshTime">&lt;refreshTime&gt;</a></td>
				<td>zero or one</td>
				<td colspan="2">This tag contains conditions for refreshing based on time.</td>
			</tr>
			<tr>
				<td><a href="#refreshDistance">&lt;refreshDistance&gt;</a></td>
				<td>zero or one</td>
				<td colspan="2">This tag contains conditions for refreshing based on distance.</td>
			</tr>
			<tr>
				<td><a href="#locations">&lt;locations&gt;</a></td>
				<td>zero or one</td>
				<td colspan="2">This tag contains the predefined locations in this dimension, which can be referenced by features.</td>
			</tr>
			<tr>
				<td><a href="#assets">&lt;assets&gt;</a></td>
				<td>zero or one</td>
				<td colspan="2">This tag contains information about the assets in this dimension, which can be referenced by image features or image overlays.</td>
			</tr>
			<tr>
				<td><a href="#features">&lt;features&gt;</a></td>
				<td>zero or one</td>
				<td colspan="2">This tag contains information about the features in this dimension.</td>
			</tr>
			<tr>
				<td><a href="#overlays">&lt;overlays&gt;</a></td>
				<td>zero or one</td>
				<td colspan="2">This tag contains information about the overlays in this dimension.</td>
			</tr>
		</table>
		
		<h3 id="refreshTime">&lt;refreshTime&gt;</h3>

		<table class="simple-child-tags">
			<caption>Simple child tags</caption>
			<tr>
				<td>&lt;validFor&gt;</td>
				<td>float, &gt;= 0</td>
				<td>0</td>
				<td>The time interval in milliseconds&ndash;from the time at which the dimension was requested to the current time&ndash;after which the dimension will be reloaded. A value of 0 means that the dimension is never reloaded based on time.</td>
			</tr>
		</table>
		
		<h3 id="refreshDistance">&lt;refreshDistance&gt;</h3>
		

		<table class="simple-child-tags">
			<caption>Simple child tags</caption>
			<tr>
				<td>&lt;validWithinRange&gt;</td>
				<td>float, &gt;= 0</td>
				<td>0</td>
				<td>The distance in meters&ndash;from the location where the dimension was requested to the current location of the device&ndash;after which the dimension will be reloaded. A value of 0 means that the dimension is never reloaded based on distance.</td>
			</tr>
		</table>
		
		<h3 id="locations">&lt;locations&gt;</h3>

		<table class="advanced-child-tags">
			<caption>Advanced child tags</caption>
			<tr>
				<td><a href="#location">&lt;location&gt;</a></td>
				<td>any</td>
				<td colspan="2">A locations that can be referenced by features.</td>
			</tr>
		</table>
		
		<h3 id="location">&lt;location&gt;</h3>

		<table class="attributes">
			<caption>Attributes</caption>
			<tr>
				<td>id</td>
				<td>string</td>
				<td>&quot;&quot;</td>
				<td>A unique location identifier that can be used by features to reference this location.</td>
			</tr>
			
		</table>

		<table class="simple-child-tags">
			<caption>Simple child tags</caption>
			<tr>
				<td>&lt;lat&gt;</td>
				<td>float</td>
				<td>required</td>
				<td>The WGS84 latitude of this location.</td>
			</tr>
			<tr>
				<td>&lt;lon&gt;</td>
				<td>float</td>
				<td>required</td>
				<td>The WGS84 longitude of this location.</td>
			</tr>
			<tr>
				<td>&lt;alt&gt;</td>
				<td>float</td>
				<td>0</td>
				<td>The WGS84 altitude of this location.</td>
			</tr>
		</table>
		
		<h3 id="assets">&lt;assets&gt;</h3>

		<table class="advanced-child-tags">
			<caption>Advanced child tags</caption>
			<tr>
				<td><a href="#asset">&lt;asset&gt;</a></td>
				<td>any</td>
				<td colspan="2">An asset that can be referenced by image features and/or overlays.</td>
			</tr>
		</table>
		
		<h3 id="asset">&lt;asset&gt;</h3>

		<table class="attributes">
			<caption>Attributes</caption>
			<tr>
				<td>id</td>
				<td>string</td>
				<td>required</td>
				<td>A unique asset identifier that can be used by features to reference this asset.</td>
			</tr>
			
		</table>

		<table class="simple-child-tags">
			<caption>Simple child tags</caption>
			<tr>
				<td>&lt;url&gt;</td>
				<td>url</td>
				<td>required</td>
				<td>An URL to an image. Supported formats are tif/tiff, jpg/jpeg, gif, png, and bmp.</td>
			</tr>
		</table>
		
		<h3 id="features-tag">&lt;features&gt;</h3>


		<table class="advanced-child-tags">
			<caption>Advanced child tags</caption>
			<tr>
				<td><a href="#featureTxt">&lt;featureTxt&gt;</a></td>
				<td>any</td>
				<td colspan="2">A text feature.</td>
			</tr>
			<tr>
				<td><a href="#featureImg">&lt;featureImg&gt;</a></td>
				<td>any</td>
				<td colspan="2">An image feature.</td>
			</tr>
		</table>
		
		<h3 id="featureTxt">&lt;featureTxt&gt;</h3>
		
		<table class="attributes">
			<caption>Attributes</caption>
			<tr>
				<td>id</td>
				<td>string</td>
				<td>&quot;&quot;</td>
				<td>A unique feature identifier that will be sent to the server when a refresh or dimension onPress event is executed.</td>
			</tr>
			
		</table>

		<table class="simple-child-tags">
			<caption>Simple child tags</caption>
			<tr>
				<td>&lt;locationId&gt;</td>
				<td>string</td>
				<td>&quot;&quot;</td>
				<td>The location of this feature. This identifier must match the identifier of an <a href="#location">&lt;location&gt;</a> defined in <a href="#locations">&lt;locations&gt;</a>. Either a &lt;locationId&gt; or a &lt;location&gt; must be specified.</td>
			</tr>
			<tr>
				<td>&lt;xLoc&gt;</td>
				<td>float</td>
				<td>0</td>
				<td>An x offset in ENU coordinate space: offset in meters to the East.</td>
			</tr>
			<tr>
				<td>&lt;yLoc&gt;</td>
				<td>float</td>
				<td>0</td>
				<td>An y offset in ENU coordinate space: offset in meters to the North.</td>
			</tr>
			<tr>
				<td>&lt;zLoc&gt;</td>
				<td>float</td>
				<td>0</td>
				<td>An z offset in ENU coordinate space: offset in meters up.</td>
			</tr>
			<tr>
				<td>&lt;anchor&gt;</td>
				<td>
					&quot;TL&quot;, &quot;TC&quot;, &quot;TR&quot;,
					&quot;CL&quot;, &quot;CC&quot;, &quot;CR&quot;,
					&quot;BL&quot;, &quot;BC&quot;, or &quot;BR&quot;
				</td>
				<td>&quot;BC&quot;</td>
				<td>The anchor point of the feature. ie. &quot;BL&quot; means that the bottom left corner of this feature is located at the specified location. One of &lt;locationId&gt; and &lt;location&gt; is required.</td>
			</tr>
			<tr>
				<td>&lt;onPress&gt;</td>
				<td><a href="#actions">action</a></td>
				<td>&quot;&quot;</td>
				<td>Specifies the action to be performed when the user taps this feature.</td>
			</tr>
			<tr>
				<td>&lt;showInRadar&gt;</td>
				<td>boolean</td>
				<td>true</td>
				<td>Specifies whether a radar blip is shown for this feature. If false, this feature is invisible on the radar.</td>
			</tr>
			<tr>
				<td>&lt;text&gt;</td>
				<td>string</td>
				<td>required</td>
				<td>The text that should be displayed for this feature.</td>
			</tr>
			
		</table>

		<table class="advanced-child-tags">
			<caption>Advanced child tags</caption>
			<tr>
				<td><a href="#featureImg">&lt;featureImg&gt;</a></td>
				<td>zero or one</td>
				<td colspan="2">The location of this feature. Either a &lt;locationId&gt; or a &lt;location&gt; must be specified.</td>
			</tr>
		</table>
		
		<h3 id="featureImg">&lt;featureImg&gt;</h3>

		<table class="attributes">
			<caption>Attributes</caption>
			<tr>
				<td>id</td>
				<td>string</td>
				<td>&quot;&quot;</td>
				<td>A unique feature identifier that will be sent to the server when a refresh or dimension onPress event is executed.</td>
			</tr>
			
		</table>

		<table class="simple-child-tags">
			<caption>Simple child tags</caption>
			<tr>
				<td>&lt;locationId&gt;</td>
				<td>string</td>
				<td>&quot;&quot;</td>
				<td>The location of this feature. This identifier must match the identifier of an <a href="#location">&lt;location&gt;</a> defined in <a href="#locations">&lt;locations&gt;</a>. Either a &lt;locationId&gt; or a &lt;location&gt; must be specified.</td>
			</tr>
			<tr>
				<td>&lt;xLoc&gt;</td>
				<td>float</td>
				<td>0</td>
				<td>An x offset in ENU coordinate space: offset in meters to the East.</td>
			</tr>
			<tr>
				<td>&lt;yLoc&gt;</td>
				<td>float</td>
				<td>0</td>
				<td>An y offset in ENU coordinate space: offset in meters to the North.</td>
			</tr>
			<tr>
				<td>&lt;zLoc&gt;</td>
				<td>float</td>
				<td>0</td>
				<td>An z offset in ENU coordinate space: offset in meters up.</td>
			</tr>
			<tr>
				<td>&lt;anchor&gt;</td>
				<td>
					&quot;TL&quot;, &quot;TC&quot;, &quot;TR&quot;,
					&quot;CL&quot;, &quot;CC&quot;, &quot;CR&quot;,
					&quot;BL&quot;, &quot;BC&quot;, or &quot;BR&quot;
				</td>
				<td>&quot;BC&quot;</td>
				<td>The anchor point of the feature. ie. &quot;BL&quot; means that the bottom left corner of this feature is located at the specified location. One of &lt;locationId&gt; and &lt;location&gt; is required.</td>
			</tr>
			<tr>
				<td>&lt;onPress&gt;</td>
				<td><a href="#actions">action</a></td>
				<td>&quot;&quot;</td>
				<td>Specifies the action to be performed when the user taps this feature.</td>
			</tr>
			<tr>
				<td>&lt;showInRadar&gt;</td>
				<td>boolean</td>
				<td>true</td>
				<td>Specifies whether a radar blip is shown for this feature. If false, this feature is invisible on the radar.</td>
			</tr>
			<tr>
				<td>&lt;assetId&gt;</td>
				<td>string</td>
				<td>required</td>
				<td>The asset identifier for the image to display. This identifier must match the identifier of an <a href="#asset">&lt;asset&gt;</a> defined in <a href="#assets">&lt;assets&gt;</a>.</td>
			</tr>
			
		</table>

		<table class="advanced-child-tags">
			<caption>Advanced child tags</caption>
			<tr>
				<td><a href="#featureImg">&lt;featureImg&gt;</a></td>
				<td>zero or one</td>
				<td colspan="2">The location of this feature. Either a &lt;locationId&gt; or a &lt;location&gt; must be specified.</td>
			</tr>
		</table>
		
		<h3 id="overlays">&lt;overlays&gt;</h3>

		<table class="advanced-child-tags">
			<caption>Advanced child tags</caption>
			<tr>
				<td><a href="#overlayTxt">&lt;overlayTxt&gt;</a></td>
				<td>any</td>
				<td colspan="2">A text overlay.</td>
			</tr>
			<tr>
				<td><a href="#overlayImg">&lt;overlayImg&gt;</a></td>
				<td>any</td>
				<td colspan="2">An image overlay.</td>
			</tr>
		</table>
		
		<h3 id="overlayTxt">&lt;overlayTxt&gt;</h3>

		<table class="attributes">
			<caption>Attributes</caption>
			<tr>
				<td>id</td>
				<td>string</td>
				<td>&quot;&quot;</td>
				<td>A unique overlay identifier that will be sent to the server when a refresh or dimension onPress event is executed.</td>
			</tr>
			
		</table>

		<table class="simple-child-tags">
			<caption>Simple child tags</caption>
			<tr>
				<td>&lt;x&gt;</td>
				<td>float</td>
				<td>required</td>
				<td>The <a href="#screen-coordinates">screen</a> x coordinate where the overlay should be positioned.</td>
			</tr>
			<tr>
				<td>&lt;y&gt;</td>
				<td>float</td>
				<td>required</td>
				<td>The <a href="#screen-coordinates">screen</a> y coordinate where the overlay should be positioned.</td>
			</tr>
			<tr>
				<td>&lt;anchor&gt;</td>
				<td>
					&quot;TL&quot;, &quot;TC&quot;, &quot;TR&quot;,
					&quot;CL&quot;, &quot;CC&quot;, &quot;CR&quot;,
					&quot;BL&quot;, &quot;BC&quot;, or &quot;BR&quot;
				</td>
				<td>&quot;BC&quot;</td>
				<td>The anchor point of the overlay. ie. &quot;BL&quot; means that the bottom left corner of this overlay is located at the specified location. One of &lt;locationId&gt; and &lt;location&gt; is required.</td>
			</tr>
			<tr>
				<td>&lt;onPress&gt;</td>
				<td><a href="#actions">action</a></td>
				<td>&quot;&quot;</td>
				<td>Specifies the action to be performed when the user taps this overlay.</td>
			</tr>
			<tr>
				<td>&lt;text&gt;</td>
				<td>string</td>
				<td>required</td>
				<td>The text that should be displayed for this overlay.</td>
			</tr>
			<tr>
				<td>&lt;width&gt;</td>
				<td>float, &gt;= 0</td>
				<td>required</td>
				<td>The width of this overlay.</td>
			</tr>
			
		</table>

		<table class="advanced-child-tags">
			<caption>Advanced child tags</caption>
			<tr>
				<td><a href="#overlayImg">&lt;overlayImg&gt;</a></td>
				<td>zero or one</td>
				<td colspan="2">The location of this overlay. Either a &lt;locationId&gt; or a &lt;location&gt; must be specified.</td>
			</tr>
		</table>
		
		<h3 id="overlayImg">&lt;overlayImg&gt;</h3>

		<table class="attributes">
			<caption>Attributes</caption>
			<tr>
				<td>id</td>
				<td>string</td>
				<td>&quot;&quot;</td>
				<td>A unique overlay identifier that will be sent to the server when a refresh or dimension onPress event is executed.</td>
			</tr>
			
		</table>

		<table class="simple-child-tags">
			<caption>Simple child tags</caption>
			<tr>
				<td>&lt;x&gt;</td>
				<td>float</td>
				<td>required</td>
				<td>The <a href="#screen-coordinates">screen</a> x coordinate where the overlay should be positioned.</td>
			</tr>
			<tr>
				<td>&lt;y&gt;</td>
				<td>float</td>
				<td>required</td>
				<td>The <a href="#screen-coordinates">screen</a> y coordinate where the overlay should be positioned.</td>
			</tr>
			<tr>
				<td>&lt;anchor&gt;</td>
				<td>
					&quot;TL&quot;, &quot;TC&quot;, &quot;TR&quot;,
					&quot;CL&quot;, &quot;CC&quot;, &quot;CR&quot;,
					&quot;BL&quot;, &quot;BC&quot;, or &quot;BR&quot;
				</td>
				<td>&quot;BC&quot;</td>
				<td>The anchor point of the overlay. ie. &quot;BL&quot; means that the bottom left corner of this overlay is located at the specified location. One of &lt;locationId&gt; and &lt;location&gt; is required.</td>
			</tr>
			<tr>
				<td>&lt;onPress&gt;</td>
				<td><a href="#actions">action</a></td>
				<td>&quot;&quot;</td>
				<td>Specifies the action to be performed when the user taps this overlay.</td>
			</tr>
			<tr>
				<td>&lt;assetId&gt;</td>
				<td>string</td>
				<td>required</td>
				<td>The asset identifier for the image to display. This identifier must match the identifier of an <a href="#asset">&lt;asset&gt;</a> defined in <a href="#assets">&lt;assets&gt;</a>.</td>
			</tr>
			
		</table>

		<table class="advanced-child-tags">
			<caption>Advanced child tags</caption>
			<tr>
				<td><a href="#overlayImg">&lt;overlayImg&gt;</a></td>
				<td>zero or one</td>
				<td colspan="2">The location of this overlay. Either a &lt;locationId&gt; or a &lt;location&gt; must be specified.</td>
			</tr>
		</table>
		
		<h3 id="actions">action</h3>
		
		<table class="actions">
			<tr>
				<th>Action</th>
				<th>Format</th>
				<th>Description</th>
			</tr>
			<tr>
				<td>refresh</td>
				<td>"refresh"</td>
				<td>Refreshes the current dimension using its refreshURL.</td>
			</tr>
			<tr>
				<td>webpage</td>
				<td>"webpage: " + URL</td>
				<td>Loads the specific URL.</td>
			</tr>
			<tr>
				<td>dimension</td>
				<td>"dimension: " + URL</td>
				<td>Loads a dimension from a specific URL.</td>
			</tr>
		</table>
		
		<h2 id="loading">Loading Dimensions</h2>
		<p>A dimension can be loaded into the browser in two ways:</p>
		<dl>
			<dt>Gamaray URLs</dt>
			<dd>The browser automatically recognizes URLs starting with <em>gamaray://</em>. These URLs are loaded using HTTP and should result in DDF data.</dd>
			
			<dt>QR codes</dt>
			<dd>The built-in QR-decoder supports codes that contain <em>http://</em> and <em>gamaray://</em> URLs. When using an external QR-decoder, you must use a Gamaray URL. For this reason, it is recommended to always use Gamaray URLs.</dd>
		</dl>
		
		<h2 id="dynamic-dimensions">Dynamic Dimensions</h2>
		<p>
			To make an interactive world, a server can be used to generate a DDF dynamically. Whenever iBetelgeuse loads a dimension from a HTTP URL, it sends HTTP POST data to the server, indicating its current location, orientation, and other relevant information, as shown in the table below. This information can then be used by the server to generate a custom dimension, by for example filtering out distant objects or modifying features and overlays based on user events.
		</p>
		<table class="post-data">
			<tr>
				<th>Key</th>
				<th>Value</th>
				<th>Description</th>
			</tr>
			<tr>
				<td>event</td>
				<td>&quot;init&quot;, &quot;refreshOnTime&quot;, &quot;refreshOnDistance&quot;, or &quot;refreshOnPress&quot;</td>
				<td>The event that triggered this request.</td>
			</tr>
			<tr>
				<td>eventSrc</td>
				<td>string</td>
				<td>The identifier of the feature or overlay that was tapped, set if the event is &quot;refreshOnPress&quot;. &quot;NULL&quot; otherwise</td>
			</tr>
			<tr>
				<td>lat</td>
				<td>float, [-90..90]</td>
				<td>The current WGS84 latitude of the device.</td>
			</tr>
			<tr>
				<td>lon</td>
				<td>float, [-180..180]</td>
				<td>The current WGS84 longitude of the device.</td>
			</tr>
			<tr>
				<td>alt</td>
				<td>float</td>
				<td>The current WGS84 altitude of the device.</td>
			</tr>
			<tr>
				<td>bearing</td>
				<td>float, [-180..180]</td>
				<td>The current bearing of the device. The angle between the look direction and North direction if the device is not flat; the angle between the the line from the center of the device to the top of the screen and the North direction otherwise. Positive angles indicate a clockwise angle, ie. a bearing of 90 degrees represents that the device is directed towards the East.</td>
			</tr>
			<tr>
				<td>pitch</td>
				<td>float, [-90..90]</td>
				<td>The current pitch of the device. Positive values indicate an upwards angle, ie. a pitch of 90 degrees means that the user is looking at the sky.</td>
			</tr>
			<tr>
				<td>roll</td>
				<td>float, [-180..180]</td>
				<td>The current roll of the device. The angle between the direction straight up and the line from the center of the device to its top if the device is not flat; zero otherwise. Positive angles indicate a counter-clockwise angle, ie. a roll of 90 degrees represents that the device's top is directed towards the left, seen from the front of the screen.</td>
			</tr>
			<tr>
				<td>width</td>
				<td>int, &gt; 0</td>
				<td>The width of the device's screen. This value may change when the device is rotated, and switches between portrait and landscape mode. See the section about <a href="#screen-coordinates">screen coordinates</a>.</td>
			</tr>
			<tr>
				<td>height</td>
				<td>int, &gt; 0</td>
				<td>The height of the device's screen. This value may change when the device is rotated, and switches between portrait and landscape mode. See the section about <a href="#screen-coordinates">screen coordinates</a>.</td>
			</tr>
			<tr>
				<td>uid</td>
				<td>string</td>
				<td>A unique identifier for the user, this must be invariant during one session. On iPhone, this is the iPhone device id.</td>
			</tr>
			<tr>
				<td>time</td>
				<td>int</td>
				<td>The time in milliseconds since January 1, 1970 UTC.</td>
			</tr>
		</table>
		
		<h2 id="example">Example</h2>
		<p>
			This is a large example showing most of the elements that can be used. You can leave out most options, which will then use the default values. The default values for optional elements are described in the <a href="ddf">section about DDFs</a> above. Note that, unfortunately, the place where this page is hosted (GitHub Pages) does not support HTTP POST requests, so loading this dimension directly from this server is not possible.
		</p>
		<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;dimension&gt;
	&lt;name&gt;Rotterdam&lt;/name&gt;
	&lt;radarRange&gt;500&lt;/radarRange&gt;
	&lt;relativeAltitude&gt;true&lt;/relativeAltitude&gt;
	&lt;refreshUrl&gt;gamaray://finalist.github.com/iBetelgeuse/example-large.gddf&lt;/refreshUrl&gt;
	&lt;refreshTime&gt;&lt;validFor&gt;5000&lt;/validFor&gt;&lt;/refreshTime&gt;
	&lt;refreshDistance&gt;&lt;validWithinRange&gt;100&lt;/validWithinRange&gt;&lt;/refreshDistance&gt;
	&lt;locations&gt;
		&lt;location id=&quot;centralstation&quot;&gt;
			&lt;lat&gt;51.924125&lt;/lat&gt;
			&lt;lon&gt;4.470041&lt;/lon&gt;
			&lt;alt&gt;0&lt;/alt&gt;
		&lt;/location&gt;
		&lt;location id=&quot;finalist-unused&quot;&gt;
			&lt;lat&gt;51.92348&lt;/lat&gt;
			&lt;lon&gt;4.469547&lt;/lon&gt;
			&lt;alt&gt;0&lt;/alt&gt;
		&lt;/location&gt;
	&lt;/locations&gt;
	&lt;assets&gt;
		&lt;asset id=&quot;betelgeuse-background&quot;&gt;
			&lt;url&gt;http://finalist.github.com/iBetelgeuse/background.jpg&lt;/url&gt;
		&lt;/asset&gt;
		&lt;asset id=&quot;betelgeuse-icon&quot;&gt;
			&lt;url&gt;http://finalist.github.com/iBetelgeuse/icon.png&lt;/url&gt;
		&lt;/asset&gt;
	&lt;/assets&gt;
	&lt;features&gt;
		&lt;featureImg id=&quot;someImage&quot;&gt;
			&lt;locationId&gt;centralstation&lt;/locationId&gt;
			&lt;onPress&gt;dimension: gamaray://finalist.github.com/iBetelgeuse/example.gddf&lt;/onPress&gt;
			&lt;assetId&gt;betelgeuse-background&lt;/assetId&gt;
		&lt;/featureImg&gt;
		&lt;featureTxt&gt;
			&lt;location&gt;
				&lt;lat&gt;51.92348&lt;/lat&gt;
				&lt;lon&gt;4.469547&lt;/lon&gt;
				&lt;alt&gt;0&lt;/alt&gt;
			&lt;/location&gt;
			&lt;xLoc&gt;0&lt;/xLoc&gt;
			&lt;yLoc&gt;0&lt;/yLoc&gt;
			&lt;zLoc&gt;20&lt;/zLoc&gt;
			&lt;anchor&gt;BC&lt;/anchor&gt;
			&lt;onPress&gt;webpage: http://www.finalist.com/&lt;/onPress&gt;
			&lt;showInRadar&gt;true&lt;/showInRadar&gt;
			&lt;text&gt;Finalist&lt;/text&gt;
		&lt;/featureTxt&gt;
	&lt;/features&gt;
	&lt;overlays&gt;
		&lt;overlayImg&gt;
			&lt;x&gt;10&lt;/x&gt;
			&lt;y&gt;100&lt;/y&gt;
			&lt;anchor&gt;TL&lt;/anchor&gt;
			&lt;assetId&gt;betelgeuse-icon&lt;/assetId&gt;
		&lt;/overlayImg&gt;
		&lt;overlayTxt&gt;
			&lt;x&gt;100&lt;/x&gt;
			&lt;y&gt;100&lt;/y&gt;
			&lt;onPress&gt;refresh&lt;/onPress&gt;
			&lt;text&gt;Refresh&lt;/text&gt;
			&lt;width&gt;100&lt;/width&gt;
		&lt;/overlayTxt&gt;
	&lt;/overlays&gt;
&lt;/dimension&gt;</pre>
		
		<h2 id="betelgeuse">Differences with Betelgeuse for Android</h2>
		<p>
			Although Betelgeuse and iBetelgeuse are mostly compatible, there are some differences in implementation. This section lists those differences. There may be other undocumented differences, since the <a href="http://www.gamaray.com/developers.html">original specification of the Gamaray browser</a> lacks clear data types and does not describe which elements are required and which are optional.
		</p>
		<ul>
			<li>iBetelgeuse does not support 3D models, because the GAMA3D format is not currently usable (there are no tools to create and/or convert GAMA3D models), and implementing 3D models is currently not a priority.</li>
			<li>iBetelgeuse ignores the &lt;waitForAssets&gt; child tag of &lt;refreshTime&gt;. It always loads assets asynchronously, which makes &lt;waitForAssets&gt; obsolete.</li>
			<li>iBetelgeuse sends the corrent roll of the device, along with the current bearing and pitch.</li>
			<li>iBetelgeuse does not require the &quot;format&quot; tag in assets, since GAMA3D models are not supported and all image formats are treated the same. Dimensions that are designed to be compatible with both browsers should set the value of this tag to what Betelgeuse expects.</li>
			<li>The default value for &lt;showOnRadar&gt; for &lt;featureTxt&gt; was changed from false to true in iBetelgeuse to be consistent with &lt;featureImg&gt;. For both features, the default value of &lt;showOnRadar&gt; is now true.</li>
			<li>In iBetelgeuse, the &quot;uid&quot; that is sent in the HTTP POST request is quaranteed to be the iPhone device id, which never changes. Betelgeuse uses an id that changes whenever you reinstall the application.</li>
		</ul>
		
	</body>
</html>